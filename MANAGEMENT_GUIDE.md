# AR Social Map - 管理ガイド & 開発ロードマップ

## 1. サービス情報

| 項目 | URL | 説明 |
|---|---|---|
| **アプリ本体** | https://ar-social-map.vercel.app | ユーザーがアクセスするURL。スマホ・PCどちらでもOK |
| **GitHub** | https://github.com/dawnstar7/ar-social-map | ソースコードの保管場所。ここを更新するとVercelも自動更新 |
| **Vercel** | https://vercel.com/dawnstar7s-projects/ar-social-map | デプロイ管理。環境変数の変更やドメイン設定はここ |
| **Supabase** | https://supabase.com/dashboard | データベース・ユーザー認証の管理。テーブルやRLSポリシーの編集 |
| **Google Cloud** | https://console.cloud.google.com/apis/credentials | Google Maps APIキーの管理。ドメイン制限の設定 |
| **Cesium ion** | https://ion.cesium.com/tokens | Cesiumトークンの管理。ドメイン制限の設定 |

---

## 2. 各サービスの役割（初心者向け）

### Vercel（バーセル）= サーバー
- あなたのアプリを世界中に配信してくれるサービス
- GitHubにコードを上げると**自動でアプリを更新**してくれる
- HTTPS（安全な通信）を自動で提供
- **無料枠**: 月100GBの通信量、十分な範囲

### GitHub（ギットハブ）= コードの保管庫
- ソースコードのバージョン管理
- 変更履歴が全部残るので、間違えても元に戻せる
- Vercelと連携して自動デプロイ

### Supabase（スパベース）= データベース
- ユーザーデータ、オブジェクト、プロフィール、フォロー関係を保存
- 匿名認証（ユーザーがログインなしで使える仕組み）
- RLS（行レベルセキュリティ）で「自分のデータしか編集できない」を実現
- **無料枠**: 500MBのデータベース、5万ユーザーまで

### Google Cloud = 3Dマップのデータ提供
- Google Photorealistic 3D Tiles（リアルな3D建物）を表示するためのAPIキー
- **無料枠**: 月$200分（個人利用なら十分）

### Cesium ion = 3Dマップエンジンの認証
- CesiumJS（3D地球表示ライブラリ）のアクセストークン
- **無料枠**: 月500リクエストまで

---

## 3. コードを更新する方法

### 手順（毎回これをやる）

```
1. コードを編集する（Claude Codeや自分で）

2. ビルドが通るか確認
   → npm run build

3. GitHubにアップロード
   → git add .
   → git commit -m "変更内容の説明"
   → git push

4. 自動でVercelがデプロイ（1〜2分で反映）
```

### Claude Codeに頼む場合
「〇〇の機能を追加して、GitHubにプッシュして」と言えばOK。

---

## 4. 現在のアプリの状態

### できていること
- [x] 3Dマップ表示（Google Photorealistic 3D Tiles）
- [x] オブジェクト配置（ピン、ドラゴン、鳥、UFO）
- [x] AR表示（カメラ + オブジェクトオーバーレイ）
- [x] ボトムナビゲーション（マップ / AR / マイページ）
- [x] プロフィール（名前・アバター色）
- [x] フォローシステム（ユーザー検索・フォロー/解除）
- [x] GPS現在地取得 + 手動場所選択
- [x] オブジェクト一覧 + 個別削除
- [x] Supabaseでデータ永続化
- [x] Vercelで公開（HTTPS対応）
- [x] セキュリティ対策（APIキー制限）

### まだできていないこと
- [ ] フォローしたユーザーのオブジェクトがマップに表示される
- [ ] 管理者（開発者）オブジェクトが全員に見える仕組み
- [ ] AR表示の精度改善
- [ ] プッシュ通知
- [ ] デザインの改善（アイコン、アニメーション）
- [ ] ログイン機能（メール/SNSログイン）
- [ ] 管理者ダッシュボード

---

## 5. 開発ロードマップ（これからやるべき順番）

### Phase A: 基本体験の完成（最優先）
ユーザーが「楽しい！」と思えるレベルにする

1. **UIデザインの改善**
   - もっとキレイで直感的なデザインに
   - アイコンをちゃんとしたものに変更（絵文字→SVGアイコン）
   - アニメーション追加（配置時のエフェクトなど）

2. **マップ体験の改善**
   - 配置したオブジェクトに3Dモデルを使う（ピンじゃなくて実際のドラゴンの形）
   - カメラ操作をもっとスムーズに
   - 現在地ボタンで自分の位置に戻る

3. **オブジェクトの種類を増やす**
   - 選べるオブジェクトを増やす（動物、建物、エフェクトなど）
   - カスタムテキスト付きピン

### Phase B: SNS機能の強化
他のユーザーと交流できるようにする

4. **フォロー機能を完成させる**
   - フォローしたユーザーのオブジェクトをマップに表示
   - ユーザーのプロフィールページ（他人のを見れる）
   - フォロワー通知

5. **タイムライン/フィード**
   - 「誰がどこに何を置いた」が見れるフィード画面
   - いいね機能

6. **ログイン機能**
   - メールアドレスやGoogleでログイン
   - プロフィール画像のアップロード

### Phase C: AR体験の進化
ARをもっとリアルにする

7. **AR精度の改善**
   - WebXR対応（対応デバイスならより正確なAR）
   - オブジェクトの距離に応じたサイズ変更

8. **AR写真撮影**
   - ARで見た景色のスクリーンショット機能
   - SNSシェア機能

### Phase D: 成長させる
ユーザーを増やす段階

9. **管理者機能**
   - 管理者ダッシュボード
   - 不適切なオブジェクトの削除

10. **パフォーマンス改善**
    - 大量のオブジェクトでも軽く動くように
    - コード分割（読み込み速度改善）

11. **カスタムドメイン**
    - 好きなURL（例: armap.jp）を設定

---

## 6. 環境変数一覧

Vercelの環境変数やローカルの `.env.local` に設定が必要なもの：

| 変数名 | 用途 | 取得場所 |
|---|---|---|
| `VITE_CESIUM_TOKEN` | 3D地図の認証 | https://ion.cesium.com/tokens |
| `VITE_GOOGLE_MAPS_API_KEY` | Google 3Dタイル | https://console.cloud.google.com |
| `VITE_SUPABASE_URL` | データベース接続先 | Supabase > Settings > API |
| `VITE_SUPABASE_ANON_KEY` | データベース認証キー | Supabase > Settings > API |

---

## 7. トラブルシューティング

### アプリが表示されない
→ Vercelのダッシュボードでデプロイが成功してるか確認

### 3Dマップが出ない
→ Cesiumトークンが正しいか確認
→ Google APIキーが有効か確認

### GPSが取れない
→ HTTPSでアクセスしているか確認（http://だとGPS使えない）
→ ブラウザの位置情報許可を確認

### データベースエラー
→ Supabaseダッシュボードでテーブルが存在するか確認
→ RLSポリシーが設定されているか確認

---

*最終更新: 2025年2月*
